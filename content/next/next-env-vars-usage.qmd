# `.env.local` vs `.env.development`

Great follow-up! This is a common point of confusion. Let me clarify the difference:

## Key Difference

```
.env.local        â†’ Overrides for YOUR machine (any environment)
.env.development  â†’ Shared config for ALL developers (dev mode only)
```

## Visual Flow

```
When you run: npm run dev
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  1. Load .env              (base, all envs)    â”‚
â”‚  2. Load .env.development  (dev only, shared)  â”‚
â”‚  3. Load .env.local        (YOUR overrides)    â”‚
â”‚                                 â†‘               â”‚
â”‚                            highest priority     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When you run: npm run build && npm start
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  1. Load .env              (base, all envs)    â”‚
â”‚  2. Load .env.production   (prod only, shared) â”‚
â”‚  3. Load .env.local        (YOUR overrides)    â”‚
â”‚                                 â†‘               â”‚
â”‚                            highest priority     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Practical Example: Team Project

Imagine you're building a radiology AI app with your team:

### `.env.development` (Committed to Git)
```bash
# Shared dev config - ALL team members use this
NEXT_PUBLIC_API_URL=https://dev-api.hospital.com
DATABASE_URL=postgresql://dev-db.hospital.com:5432/radiology
LOG_LEVEL=debug
```

### `.env.local` (NOT committed, in .gitignore)
```bash
# Your personal overrides
DATABASE_URL=postgresql://localhost:5432/radiology_local
# ^ You run PostgreSQL locally, but teammate uses Docker

OPENAI_API_KEY=sk-your-personal-key
# ^ Each developer has their own API key
```

### Your Teammate's `.env.local`
```bash
# Their personal overrides
DATABASE_URL=postgresql://localhost:5433/radiology_docker
# ^ Different port because they use Docker

OPENAI_API_KEY=sk-their-personal-key
```

## File Commit Strategy

```
Version Control (.git):
â”œâ”€â”€ .env.development       âœ… Committed (shared config)
â”œâ”€â”€ .env.production        âœ… Committed (shared config)
â”œâ”€â”€ .env.example           âœ… Committed (template)
â”œâ”€â”€ .env.local            âŒ .gitignored (personal)
â””â”€â”€ .env.*.local          âŒ .gitignored (personal)
```

## Complete Priority Chain

```
Priority (highest â†’ lowest):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Development (npm run dev):
  1. .env.development.local  â† rarely used
  2. .env.local             â† YOUR secrets
  3. .env.development       â† team config
  4. .env                   â† base config

Production (npm run build):
  1. .env.production.local   â† rarely used
  2. .env.local             â† YOUR secrets
  3. .env.production        â† team config
  4. .env                   â† base config

Test (npm run test):
  1. .env.test.local
  2. .env.local (NOT loaded in test!)
  3. .env.test
  4. .env
```

**âš ï¸ Important**: `.env.local` is **NOT loaded** during `npm run test` - this is intentional to ensure consistent tests!

## Real-World Scenario

### Your Hospital's Setup:

```
Team Repository:
â”œâ”€â”€ .env.development          # Dev database, staging API
â”œâ”€â”€ .env.production          # Production database, prod API
â””â”€â”€ .env.example            # Template for new developers

Your Machine:
â”œâ”€â”€ .env.local              # Your personal API keys, local DB
â””â”€â”€ (inherits .env.development when you run npm run dev)

Production Server (Netlify/Vercel):
â””â”€â”€ Environment variables set in dashboard
    (overrides .env.production if conflicts)
```

## Best Practices for Your Workflow

### 1. Create `.env.example` (committed)
```bash
# .env.example - Template for new team members
DATABASE_URL=postgresql://localhost:5432/radiology
OPENAI_API_KEY=your_key_here
NEXT_PUBLIC_API_URL=http://localhost:3000
```

### 2. Setup Script
```bash
# When new developer joins
cp .env.example .env.local
# Then they fill in their personal values
```

### 3. Use `.env.development` for Shared Resources
```bash
# .env.development
NEXT_PUBLIC_API_URL=https://staging-api.hospital.com
NEXT_PUBLIC_ANALYTICS_ID=GA-STAGING-ID
FEATURE_FLAG_NEW_UI=true  # All devs test new UI
```

### 4. Use `.env.local` for Personal Settings
```bash
# .env.local
DATABASE_URL=postgresql://localhost:5432/my_local_db
OPENAI_API_KEY=sk-my-personal-key
SKIP_TYPE_CHECK=true  # You want faster builds
```

## Quick Decision Tree

```
Should I use .env.local or .env.development?
                â”‚
                â”œâ”€ Is this a secret/personal credential?
                â”‚  â””â”€ YES â†’ .env.local âŒ DON'T COMMIT
                â”‚
                â”œâ”€ Do all developers need the same value?
                â”‚  â””â”€ YES â†’ .env.development âœ… COMMIT
                â”‚
                â””â”€ Is it machine-specific (port, path)?
                   â””â”€ YES â†’ .env.local âŒ DON'T COMMIT
```

## Common Mistake to Avoid

```bash
# âŒ Don't put secrets in .env.development
# .env.development (COMMITTED TO GIT!)
OPENAI_API_KEY=sk-real-key-exposed  # ğŸš¨ DANGER!

# âœ… Put secrets in .env.local
# .env.local (GITIGNORED)
OPENAI_API_KEY=sk-real-key-safe  # âœ… SAFE
```

---

**TL;DR for Your Radiology Project:**
- **`.env.development`** â†’ Shared staging API URLs, feature flags (commit this)
- **`.env.local`** â†’ Your personal DB connection, API keys (never commit)

